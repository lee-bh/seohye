<html>
    <head>
        <meta charset="utf-8">
        <title>동아시아 타이포그래피 연대기</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h1>동아시아 타이포그래피 연대기</h1>
        <main id="main">
            <div id="yrLineContainer"></div>
            <div id="contents" class="move"></div>
            <div id="yrTextContainer"></div>
        </main>
        <script src="data.js"></script>
        <script src="mousedrag.js"></script>
        <script>

data.sort((a, b) => a.yr - b.yr);
const startYr = data[0].yr;
const endYr = data[data.length - 1].yr;
const timeLength = endYr - startYr;
const stX = 100;
const stY = 100;
const intervalH = 10;
const intervalV = 40;

// const main = document.getElementById("main");
// let a = document.createElement("div");
// a.id = "yrLineContainer"; main.appendChild(a);
// let b = document.createElement("div");b.className = "move";
// b.id = "contents"; main.appendChild(b);
// let c = document.createElement("div");
// c.id = "yrTextContainer"; main.appendChild(c);


const content = document.getElementById("contents");
content.style.width = (timeLength*intervalH + stX + 400) + "px";
const contentsHeight = data.length*intervalV + stY*2;
content.style.height = contentsHeight + "px";

const yrLineSt = startYr - startYr%10;
const yrLineEnd = endYr + (10 - endYr%10);
const yrLineInterval = intervalH*10;
const yrLineCount = (yrLineEnd - yrLineSt)/10 + 5;
const stPos = -(startYr%10 * intervalH) + stX;
for(let i = 0; i < yrLineCount; i++){
    const yrLine = document.createElement("div");
    yrLine.classList.add("yrLine");
    yrLine.style.left = (stPos + i*yrLineInterval) + "px";
    yrLine.style.height = contentsHeight + "px";
    yrLineContainer.appendChild(yrLine);
    const yrText = document.createElement("div");
    yrText.classList.add("yrText");
    yrText.innerHTML = (yrLineSt + i*10).toString();
    yrText.style.left = (stPos + i*yrLineInterval + 4) + "px";
    yrText.style.top = "4px";
    yrTextContainer.appendChild(yrText);
}

data.forEach((item, index) => {
    let entry = document.createElement("div");
    entry.classList.add("entry");
    entry.innerHTML = `<div class="desc">${item.desc}</div>`;
    entry.style.left = (stX + (item.yr - startYr)*intervalH) + "px";
    entry.style.top = stY + index*intervalV + "px";
    let contents = document.getElementById("contents");
    if(item.nation == "한국"){ entry.style.borderColor = "#000"};
    if(item.nation == "일본"){ entry.style.borderColor = "#00F"};
    if(item.nation == "중국"){ entry.style.borderColor = "#F00"};
    contents.appendChild(entry);
});

function createEntryDetail(item){
    for(let i =0; i<data.length; i++){
        const item = data[i];    
        let entry = document.createElement("div");
        entry.classList.add("detail");
        entry.innerHTML = `
            <div class="nation">${item.nation}</div>
            <div class="yr">${item.yr}</div>
            <div class="desc">${item.desc}</div>`;
        if(item.ex1 != null){entry.innerHTML += `<div class="ex1">${item.ex1}</div>`}
        if(item.ex2 != null){entry.innerHTML += `<div class="ex2">${item.ex2}</div>`}
        if(item.ex3 != null){entry.innerHTML += `<div class="ex3">${item.ex3}</div>`}
        if(item.cite1 != null){entry.innerHTML += `<div class="cite1">${item.cite1}</div>`}  
        document.body.appendChild(entry);
    }
}


        </script>
    </body>
</html>